{"ast":null,"code":"import React,{useState,useEffect,useContext}from'react';import{AuthContext}from'../context/AuthContext';import{Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Paper,Typography,Button,Skeleton}from'@mui/material';import UnfollowIcon from'@mui/icons-material/RemoveCircleOutline';import ReactCountryFlag from\"react-country-flag\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Follow=()=>{const[followedStocks,setFollowedStocks]=useState([]);const[loading,setLoading]=useState(true);const{isAuthenticated}=useContext(AuthContext);const handleUnfollowClick=primaryTicker=>{fetch(\"https://django-stocks-ecbc6bc5e208.herokuapp.com/api/stocks/\".concat(primaryTicker,\"/toggle_follow/\"),{method:'POST',headers:{'Authorization':\"Token 13502af70a55d1fcddf7c094e4418c65904ef6eb\"// Replace with the actual user's authentication token\n}}).then(response=>response.json()).then(data=>{if(data.status===\"ok\"&&data.action===\"unfollowed\"){setFollowedStocks(followedStocks.filter(stock=>stock.primary_ticker!==primaryTicker));}else{console.error('Error:',data);}}).catch(error=>{console.error('Error:',error);});};useEffect(()=>{if(isAuthenticated){fetch('https://django-stocks-ecbc6bc5e208.herokuapp.com/api/followed_stocks/',{headers:{'Authorization':\"Token 13502af70a55d1fcddf7c094e4418c65904ef6eb\"// Replace with the actual user's authentication token\n}}).then(response=>response.json()).then(data=>{setFollowedStocks(data);setLoading(false);}).catch(error=>console.error('Error fetching followed stocks:',error));}},[isAuthenticated]);return/*#__PURE__*/_jsxs(Paper,{sx:{p:2,margin:'auto',flexGrow:1,backgroundColor:'transparent',boxShadow:'none',mt:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,component:\"div\",children:\"Stocks You're Following\"}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,sx:{boxShadow:'none'},children:/*#__PURE__*/_jsxs(Table,{sx:{minWidth:650},\"aria-label\":\"simple table\",children:[/*#__PURE__*/_jsx(TableHead,{sx:{backgroundColor:theme=>theme.palette.primary.main},children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Stock Name\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Ticker\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Country\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Market Cap\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Industry\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:loading?/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:6,children:/*#__PURE__*/_jsx(Skeleton,{variant:\"rectangular\",height:200,animation:\"wave\"})})}):followedStocks.map(stock=>/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{component:\"th\",scope:\"row\",children:stock.name}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:stock.primary_ticker}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:stock.country_iso&&/*#__PURE__*/_jsx(ReactCountryFlag,{countryCode:stock.country_iso,svg:true,style:{width:'2em',height:'2em'},title:stock.country_iso})}),/*#__PURE__*/_jsxs(TableCell,{align:\"right\",children:[stock.currency_symbol,(stock.highlights.market_capitalization/1000000000).toFixed(2),\"b\"]}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:stock.industry}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(UnfollowIcon,{}),onClick:()=>handleUnfollowClick(stock.primary_ticker),children:\"Unfollow\"})})]},stock.id))})]})})]});};export default Follow;","map":{"version":3,"names":["React","useState","useEffect","useContext","AuthContext","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","Typography","Button","Skeleton","UnfollowIcon","ReactCountryFlag","jsx","_jsx","jsxs","_jsxs","Follow","followedStocks","setFollowedStocks","loading","setLoading","isAuthenticated","handleUnfollowClick","primaryTicker","fetch","concat","method","headers","then","response","json","data","status","action","filter","stock","primary_ticker","console","error","catch","sx","p","margin","flexGrow","backgroundColor","boxShadow","mt","children","variant","gutterBottom","component","minWidth","theme","palette","primary","main","align","colSpan","height","animation","map","scope","name","country_iso","countryCode","svg","style","width","title","currency_symbol","highlights","market_capitalization","toFixed","industry","startIcon","onClick","id"],"sources":["C:/Users/David/Desktop/Websites/stocks/frontend/src/pages/Following.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Paper,\r\n  Typography,\r\n  Button,\r\n  Skeleton,\r\n} from '@mui/material';\r\nimport UnfollowIcon from '@mui/icons-material/RemoveCircleOutline';\r\nimport ReactCountryFlag from \"react-country-flag\";\r\n\r\nconst Follow = () => {\r\n  const [followedStocks, setFollowedStocks] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const { isAuthenticated } = useContext(AuthContext);\r\n\r\n  const handleUnfollowClick = (primaryTicker) => {\r\n    fetch(`https://django-stocks-ecbc6bc5e208.herokuapp.com/api/stocks/${primaryTicker}/toggle_follow/`, {\r\n        method: 'POST',\r\n        headers: {\r\n        'Authorization': `Token 13502af70a55d1fcddf7c094e4418c65904ef6eb`, // Replace with the actual user's authentication token\r\n        },\r\n    })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n        if (data.status === \"ok\" && data.action === \"unfollowed\") {\r\n        setFollowedStocks(followedStocks.filter(stock => stock.primary_ticker !== primaryTicker));\r\n        } else {\r\n        console.error('Error:', data);\r\n        }\r\n    })\r\n    .catch(error => {\r\n        console.error('Error:', error);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated) {\r\n      fetch('https://django-stocks-ecbc6bc5e208.herokuapp.com/api/followed_stocks/', {\r\n        headers: {\r\n          'Authorization': `Token 13502af70a55d1fcddf7c094e4418c65904ef6eb`, // Replace with the actual user's authentication token\r\n        },\r\n      })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        setFollowedStocks(data);\r\n        setLoading(false);\r\n      })\r\n      .catch(error => console.error('Error fetching followed stocks:', error));\r\n    }\r\n  }, [isAuthenticated]);\r\n\r\n  return (\r\n    <Paper sx={{ p: 2, margin: 'auto', flexGrow: 1, backgroundColor: 'transparent', boxShadow: 'none', mt: 2 }}>\r\n      <Typography variant=\"h6\" gutterBottom component=\"div\">\r\n        Stocks You're Following\r\n      </Typography>\r\n      <TableContainer component={Paper} sx={{ boxShadow: 'none' }}>\r\n        <Table sx={{ minWidth: 650 }} aria-label=\"simple table\">\r\n          <TableHead sx={{ backgroundColor: theme => theme.palette.primary.main }}>\r\n            <TableRow>\r\n              <TableCell>Stock Name</TableCell>\r\n              <TableCell align=\"right\">Ticker</TableCell>\r\n              <TableCell align=\"right\">Country</TableCell>\r\n              <TableCell align=\"right\">Market Cap</TableCell>\r\n              <TableCell align=\"right\">Industry</TableCell>\r\n              <TableCell align=\"right\">Action</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {loading ? (\r\n          <TableRow>\r\n            <TableCell colSpan={6}>\r\n              <Skeleton variant=\"rectangular\" height={200} animation=\"wave\" />\r\n            </TableCell>\r\n          </TableRow>\r\n            ) : (\r\n              followedStocks.map((stock) => (\r\n                <TableRow key={stock.id}>\r\n                  <TableCell component=\"th\" scope=\"row\">\r\n                    {stock.name}\r\n                  </TableCell>\r\n                  <TableCell align=\"right\">{stock.primary_ticker}</TableCell>\r\n                  <TableCell align=\"right\">\r\n                    {stock.country_iso && (\r\n                      <ReactCountryFlag\r\n                        countryCode={stock.country_iso}\r\n                        svg\r\n                        style={{\r\n                          width: '2em',\r\n                          height: '2em',\r\n                        }}\r\n                        title={stock.country_iso}\r\n                      />\r\n                    )}\r\n                  </TableCell>\r\n                  <TableCell align=\"right\">{ (stock.currency_symbol) }{ (stock.highlights.market_capitalization / 1000000000).toFixed(2) }b</TableCell>\r\n                  <TableCell align=\"right\">{stock.industry}</TableCell>\r\n                  <TableCell align=\"right\">\r\n                    <Button\r\n                      startIcon={<UnfollowIcon />}\r\n                      onClick={() => handleUnfollowClick(stock.primary_ticker)}\r\n                    >\r\n                      Unfollow\r\n                    </Button>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))\r\n            )}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default Follow;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}