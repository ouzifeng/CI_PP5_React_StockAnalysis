{"version":3,"file":"static/js/66.3e9c8921.chunk.js","mappings":"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","sources":["components/stockpage/IncomeStatements.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport {\r\n  Button,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Paper,\r\n  Typography,\r\n  Box,\r\n  Grid,\r\n  Skeleton,\r\n  Alert,\r\n} from '@mui/material';\r\nimport GetAppIcon from '@mui/icons-material/GetApp';\r\nimport Papa from 'papaparse';\r\nimport { AuthContext } from '../../context/AuthContext';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\n\r\nconst IncomeStatements = ({ incomeStatements }) => {\r\n  const [selectedFrequency, setSelectedFrequency] = useState('yearly');\r\n  const [filteredIncomeStatements, setFilteredIncomeStatements] = useState([]);\r\n  const [showLoginAlert, setShowLoginAlert] = useState(false);\r\n  const { isAuthenticated } = useContext(AuthContext);\r\n\r\n  useEffect(() => {\r\n    const filteredData = incomeStatements?.filter(statement => statement.type.toLowerCase() === selectedFrequency);\r\n    setFilteredIncomeStatements(filteredData);\r\n  }, [incomeStatements, selectedFrequency]);\r\n\r\nconst financialMetricsOrder = [\r\n  'total_revenue',\r\n  'cost_of_revenue',\r\n  'gross_profit',\r\n  'research_development',\r\n  'selling_general_administrative',\r\n  'selling_and_marketing_expenses',\r\n  'total_operating_expenses',\r\n  'operating_income',\r\n  'ebit', // Earnings Before Interest and Taxes\r\n  'ebitda', // Earnings Before Interest, Taxes, Depreciation, and Amortization\r\n  'depreciation_and_amortization',\r\n  'reconciled_depreciation',\r\n  'non_operating_income_net_other',\r\n  'interest_income',\r\n  'net_interest_income',\r\n  'interest_expense',\r\n  'income_before_tax',\r\n  'tax_provision',\r\n  'income_tax_expense',\r\n  'extraordinary_items',\r\n  'non_recurring',\r\n  'other_items',\r\n  'minority_interest',\r\n  'effect_of_accounting_charges',\r\n  'net_income',\r\n  'discontinued_operations',\r\n  'net_income_from_continuing_ops',\r\n  'preferred_stock_and_other_adjustments',\r\n  'net_income_applicable_to_common_shares'\r\n];\r\n\r\n  const formatLabel = (key) => {\r\n    // Convert snake_case to Title Case\r\n    return key\r\n      .replace(/_/g, ' ')\r\n      .split(' ')\r\n      .map(word => word.charAt(0).toUpperCase() + word.slice(1))\r\n      .join(' ');\r\n  };\r\n\r\n  // Prepare the data structure for rendering\r\n  const rows = financialMetricsOrder.map(key => {\r\n    const row = { metric: formatLabel(key) };\r\n    filteredIncomeStatements.forEach(statement => {\r\n      row[statement.date] = statement[key];\r\n    });\r\n    return row;\r\n  });\r\n\r\n  const renderTableCell = (row, key) => {\r\n    const value = row[key];\r\n    const numericValue = typeof value === 'number' ? value : parseFloat(value);\r\n    const displayedValue = !isNaN(numericValue) ? numericValue.toLocaleString() : value;\r\n    return <TableCell key={key}>{displayedValue}</TableCell>;\r\n  };\r\n\r\n  const downloadCSV = () => {\r\n    if (!isAuthenticated) {\r\n      setShowLoginAlert(true);\r\n      return;\r\n    }\r\n\r\n    if (filteredIncomeStatements.length > 0) {\r\n      const csvData = Papa.unparse(filteredIncomeStatements);\r\n      const blob = new Blob([csvData], { type: 'text/csv' });\r\n      const url = window.URL.createObjectURL(blob);\r\n\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = 'income_statements.csv';\r\n      a.click();\r\n      window.URL.revokeObjectURL(url);\r\n    }\r\n  };\r\n\r\n  if (!filteredIncomeStatements || filteredIncomeStatements.length === 0) {\r\n    return (\r\n      <Paper elevation={3} sx={{ margin: 'auto', overflow: 'hidden' }}>\r\n        <Box sx={{ bgcolor: 'primary.main', p: 1 }}>\r\n          <Typography variant=\"subtitle1\" sx={{ color: 'common.white', textAlign: 'center' }}>Income Statement</Typography>\r\n        </Box>\r\n        <TableContainer>\r\n          <Table aria-label=\"Income Statement\" size=\"small\">\r\n            <TableHead>\r\n              <TableRow>\r\n                {Array(6).fill(null).map((_, index) => (\r\n                  <TableCell key={index}>\r\n                    <Skeleton variant=\"text\" width={100} animation=\"wave\" />\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {Array(5).fill(null).map((_, rowIndex) => (\r\n                <TableRow key={rowIndex}>\r\n                  {Array(6).fill(null).map((_, cellIndex) => (\r\n                    <TableCell key={cellIndex}>\r\n                      <Skeleton variant=\"text\" width={100} animation=\"wave\" />\r\n                    </TableCell>\r\n                  ))}\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {showLoginAlert && (\r\n        <Alert severity=\"warning\" onClose={() => setShowLoginAlert(false)}>\r\n          Please <RouterLink to=\"/login\">login</RouterLink> to download the income statements.\r\n        </Alert>\r\n      )}\r\n      <Grid container spacing={1}>\r\n        <Grid item>\r\n          <Button\r\n            variant={selectedFrequency === 'yearly' ? 'contained' : 'outlined'}\r\n            onClick={() => setSelectedFrequency('yearly')}\r\n            sx={{ margin: 1 }}\r\n          >\r\n            Yearly\r\n          </Button>\r\n        </Grid>\r\n        <Grid item>\r\n          <Button\r\n            variant={selectedFrequency === 'quarterly' ? 'contained' : 'outlined'}\r\n            onClick={() => setSelectedFrequency('quarterly')}\r\n            sx={{ margin: 1 }}\r\n          >\r\n            Quarterly\r\n          </Button>\r\n        </Grid>\r\n        <Grid item>\r\n          <Button\r\n            variant=\"outlined\"\r\n            onClick={downloadCSV}\r\n            sx={{ margin: 1 }}\r\n            startIcon={<GetAppIcon />}\r\n          >\r\n            Download CSV\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <Paper elevation={3} sx={{ margin: 'auto', overflow: 'hidden' }}>\r\n        <Box sx={{ bgcolor: 'primary.main', p: 1 }}>\r\n          <Typography variant=\"subtitle1\" sx={{ color: 'common.white', textAlign: 'center' }}>Income Statement</Typography>\r\n        </Box>\r\n        <TableContainer>\r\n          <Table aria-label=\"Income Statement\" size=\"small\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell sx={{ fontWeight: 'bold' }}></TableCell>\r\n                {filteredIncomeStatements.map((statement, index) => (\r\n                  <TableCell key={index} sx={{ fontWeight: 'bold' }}>\r\n                    {statement.date}\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {rows.map((row, rowIndex) => (\r\n                <TableRow key={rowIndex}>\r\n                  <TableCell component=\"th\" scope=\"row\" sx={{ fontWeight: 'bold' }}>\r\n                    {row.metric}\r\n                  </TableCell>\r\n                  {Object.keys(row).filter(key => key !== 'metric').map(dateKey => (\r\n                    renderTableCell(row, dateKey)\r\n                  ))}\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default IncomeStatements;\r\n"],"names":["_ref","incomeStatements","selectedFrequency","setSelectedFrequency","useState","filteredIncomeStatements","setFilteredIncomeStatements","showLoginAlert","setShowLoginAlert","isAuthenticated","useContext","AuthContext","useEffect","filteredData","filter","statement","type","toLowerCase","formatLabel","key","replace","split","map","word","charAt","toUpperCase","slice","join","rows","row","metric","forEach","date","length","_jsxs","_Fragment","children","Alert","severity","onClose","_jsx","RouterLink","to","Grid","container","spacing","item","Button","variant","onClick","sx","margin","downloadCSV","csvData","Papa","blob","Blob","url","window","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL","startIcon","GetAppIcon","Paper","elevation","overflow","Box","bgcolor","p","Typography","color","textAlign","TableContainer","Table","size","TableHead","TableRow","TableCell","fontWeight","index","TableBody","rowIndex","component","scope","Object","keys","dateKey","renderTableCell","value","numericValue","parseFloat","displayedValue","isNaN","toLocaleString","Array","fill","_","Skeleton","width","animation","cellIndex"],"sourceRoot":""}