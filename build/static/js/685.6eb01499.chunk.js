"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[685],{2685:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Z});var n=o(2791),r=o(9953),a=o(3400),c=o(890),s=o(7655),d=o(4294),i=o(697),h=o(3239),l=o(493),f=o(4852),p=o(9900),u=o(9823),j=o(2419),k=o(7247),v=o(184);const Z=e=>{let{open:t,onClose:o,stockId:Z,stockData:g}=e;const[x,m]=(0,n.useState)([]),[b,y]=(0,n.useState)(""),[E,C]=(0,n.useState)(!1);(0,n.useEffect)((()=>{if(t&&Z){const e=Z.replace("-",".");C(!0),fetch("https://django-stocks-ecbc6bc5e208.herokuapp.com/api/notes/?stock=".concat(e),{method:"GET",headers:{Authorization:"Token 13502af70a55d1fcddf7c094e4418c65904ef6eb"}}).then((e=>e.json())).then((e=>{m(e),C(!1)})).catch((e=>{console.error("Error fetching notes:",e),C(!1)}))}}),[t,Z]);return(0,v.jsx)(r.ZP,{anchor:"right",open:t,onClose:o,children:(0,v.jsxs)("div",{style:{width:350,padding:16},children:[(0,v.jsx)(a.Z,{onClick:o,style:{position:"absolute",right:8,top:8},children:(0,v.jsx)(u.Z,{})}),(0,v.jsx)(c.Z,{variant:"h6",style:{marginBottom:16},children:"My Notes"}),(0,v.jsx)(s.Z,{label:"Add a note",fullWidth:!0,value:b,onChange:e=>y(e.target.value),variant:"outlined",style:{marginBottom:16}}),(0,v.jsx)(d.Z,{variant:"contained",color:"primary",startIcon:(0,v.jsx)(j.Z,{}),onClick:()=>{if(""!==b.trim()){if(!g||!g.id)return void console.error("Stock data or stock ID is missing");const e={stock:g.id,content:b};C(!0),fetch("https://django-stocks-ecbc6bc5e208.herokuapp.com/api/notes/",{method:"POST",headers:{Authorization:"Token 13502af70a55d1fcddf7c094e4418c65904ef6eb","Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(e.ok)return e.json();throw e.json().then((e=>console.error("Error adding note:",e))),new Error("Failed to add note")})).then((e=>{m([...x,e]),y(""),C(!1)})).catch((e=>{console.error("Error adding note:",e),C(!1)}))}},fullWidth:!0,disabled:E,children:"Add Note"}),E&&(0,v.jsx)(i.Z,{display:"flex",justifyContent:"center",m:2,children:(0,v.jsx)(h.Z,{})}),(0,v.jsx)(l.Z,{children:x.map((e=>(0,v.jsxs)(f.ZP,{children:[(0,v.jsx)(p.Z,{primary:e.content,secondary:new Date(e.created_at).toLocaleDateString()}),(0,v.jsx)(a.Z,{edge:"end",onClick:()=>{return t=e.id,C(!0),void fetch("https://django-stocks-ecbc6bc5e208.herokuapp.com/api/notes/".concat(t,"/"),{method:"DELETE",headers:{Authorization:"Token 13502af70a55d1fcddf7c094e4418c65904ef6eb"}}).then((e=>{if(!e.ok)throw e.json().then((e=>console.error("Error deleting note:",e))),new Error("Failed to delete note");m(x.filter((e=>e.id!==t))),C(!1)})).catch((e=>{console.error("Error deleting note:",e),C(!1)}));var t},children:(0,v.jsx)(k.Z,{})})]},e.id)))})]})})}},2419:(e,t,o)=>{var n=o(4836);t.Z=void 0;var r=n(o(5649)),a=o(184);t.Z=(0,r.default)((0,a.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},9823:(e,t,o)=>{var n=o(4836);t.Z=void 0;var r=n(o(5649)),a=o(184);t.Z=(0,r.default)((0,a.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},7247:(e,t,o)=>{var n=o(4836);t.Z=void 0;var r=n(o(5649)),a=o(184);t.Z=(0,r.default)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")}}]);
//# sourceMappingURL=685.6eb01499.chunk.js.map